(()=>{var l=chrome;function m(e){let t=("fff12fa3cdd64ff83a30d7b392be57e978a86eee93b9728ed0366bf231abdaad"+e).split("").map(o=>o.charCodeAt(0));return f(t)}var p=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let o=8;o--;)t=t&1?3988292384^t>>>1:t>>>1;p[e]=t}function f(e){let t=-1;for(let o of e)t=t>>>8^p[t&255^o];return(t^-1)>>>0}async function g(e,t){let o=""+[+new Date,performance.now(),Math.random()],[n,s]=await new Promise(a=>{l.runtime.sendMessage([o,e,...t],a)});if(n===m(o))return s}function c(e){if(document.readyState!=="loading")setTimeout(e,0);else{let t;t=()=>{removeEventListener("DOMContentLoaded",t),e()},addEventListener("DOMContentLoaded",t)}}[...document.body.children].forEach(e=>e.remove());function r(e,t,o={}){let n=document.createElement(e);return o&&Object.entries(o).forEach(([s,a])=>n[s]=a),t.appendChild(n),n}function b(){r("h1",document.body,{innerText:"Invalid URL."}),r("h2",document.body,{innerText:"Please set the URL hash and reload the page."}),r("p",document.body,{innerText:"Example: https://nopecha.com/setup#TESTKEY123"})}function h(e){return/^(true|false)$/.test(e)?e==="true":/^\d+$/.test(e)?+e:e}function y(){let e="NopeCHA Settings Import";document.title!==e&&(document.querySelector("title").innerText=e),r("h3",document.body,{innerText:"/setup is deprecated, please use the automation build instead."});let t=document.location.hash.substring(1);if(!t)return b();let o=t.split("|"),n=Object.fromEntries(o.map(i=>i.includes("=")?i.split("="):["key",i]).map(([i,d])=>[i,h(d)]));if("disabled_hosts"in n){let i=""+n.disabled_hosts;i===""?n.disabled_hosts=[]:decodeURIComponent(i).startsWith("[")?n.disabled_hosts=JSON.parse(decodeURIComponent(i)):n.disabled_hosts=i.split(",")}"key"in n&&n.key.includes(",")&&(n.keys=n.key.split(","),delete n.key),console.log(n),r("h2",document.body,{innerText:"Imported following settings:"});let s=r("table",document.body),a=r("tr",s);r("th",a,{innerText:"Name"}),r("th",a,{innerText:"Value"}),Object.entries(n).forEach(([i,d])=>{let u=r("tr",s);r("td",u,{innerText:i}),r("td",u,{innerText:JSON.stringify(d)})}),r("h2",document.body,{innerText:"Import URL:"}),r("a",document.body,{innerText:location.href,href:location.href,style:"word-wrap: break-word"}),g("settings::update",[n])}c(y);})();
