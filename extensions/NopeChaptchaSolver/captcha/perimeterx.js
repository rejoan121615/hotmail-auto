(()=>{var s=chrome;function c(e){let t=("fff12fa3cdd64ff83a30d7b392be57e978a86eee93b9728ed0366bf231abdaad"+e).split("").map(o=>o.charCodeAt(0));return p(t)}var l=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let o=8;o--;)t=t&1?3988292384^t>>>1:t>>>1;l[e]=t}function p(e){let t=-1;for(let o of e)t=t>>>8^l[t&255^o];return(t^-1)>>>0}async function u(e,t){let o=""+[+new Date,performance.now(),Math.random()],[n,C]=await new Promise(x=>{s.runtime.sendMessage([o,e,...t],x)});if(n===c(o))return C}function m(){let e;return t=>e||(e=t().finally(()=>e=void 0),e)}var M=m(),r;function g(){return M(async()=>(r||(r=await u("settings::get",[])),r))}function f(e){r&&(r={...r,...e},_(r))}function a(){return r}var b=[];function w(e,t,o){let n=[e,t,o];b.push(n),S(n,a())}function S(e,t){let o=e[1](t),n=!!e[3];o!==n&&(o?e[3]=e[2]():(e[3](),e[3]=null))}function _(e){b.forEach(t=>S(t,e))}function y(){s.runtime.connect({name:"stream"}).onMessage.addListener(t=>{t.event==="settingsUpdate"&&f(t.settings)})}function d(e){if(document.readyState!=="loading")setTimeout(e,0);else{let t;t=()=>{removeEventListener("DOMContentLoaded",t),e()},addEventListener("DOMContentLoaded",t)}}function i(e){return new Promise(t=>setTimeout(t,e))}function h(){return document.location.pathname==="/blocked"&&window.top!==window&&window.top.top===window.top&&[...window.top.document.querySelectorAll("script")].some(e=>e.innerText.includes("_pxAppId"))&&document.querySelector("[aria-label='Press & Hold']")}function v(){return A(),()=>{}}async function A(){let e=a();e.turnstile_solve_delay&&await i(e.turnstile_solve_delay_time);let t=document.querySelector("[role=button]");t.dispatchEvent(new MouseEvent("mousedown")),await new Promise(o=>{let n;n=new MutationObserver(()=>{o(),n.disconnect()}),n.observe(t,{attributes:!0,attributeFilter:["aria-label"]})}),await i(200+Math.floor(Math.random()*500)),t.dispatchEvent(new MouseEvent("mouseup"))}async function P(){if(await i(100),!h())return;y(),await g(),await u("tab::registerDetectedCaptcha",["perimeterx"]);let e=location.hostname;w("perimeterx/auto-solve",t=>t.enabled&&t.perimeterx_auto_solve&&!t.disabled_hosts.includes(e),v)}d(P);})();
